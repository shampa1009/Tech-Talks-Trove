ЁЯЪА Designing a News Feed like Facebook/Instagram/X

It is one of the most exciting challenges in system design. At the heart of it lies a concept called Fanout.

ЁЯФН Imagine this:
 ржЖржкржирж┐ ржпржжрж┐ ржПржХржЬржи ржЬржиржкрзНрж░рж┐ржпрж╝ рж▓рзЗржЦржХ рж╣ржи ржПржмржВ ржирждрзБржи ржПржХржЯрж┐ ржкрзЛрж╕рзНржЯ ржжрзЗржи, рж╕рзЗржЗ ржкрзЛрж╕рзНржЯржЯрж┐ ржЖржкржирж╛рж░ рж╣рж╛ржЬрж╛рж░ рж╣рж╛ржЬрж╛рж░ ржлрж▓рзЛржпрж╝рж╛рж░рзЗрж░ рж╣рзЛржо ржлрж┐ржбрзЗ ржХрзАржнрж╛ржмрзЗ ржкрзМржБржЫрж╛ржмрзЗ? ржПржЦрж╛ржирзЗржЗ ржлрзНржпрж╛ржиржЖржЙржЯ ржЖрж╕рзЗ ржХрж╛ржЬрзЗ.

тЬи ржжрзБржЯрж┐ ржкрзНрж░ржзрж╛ржи ржХрзМрж╢рж▓ ржЖржЫрзЗ: Fanout-on-Write ржПржмржВ Fanout-on-Read

 ЁЯУЭ Fanout-on-Write (Push) тЖТ ржкрзЛрж╕рзНржЯ ржХрж░рж╛рж░ рж╕рж╛ржерзЗ рж╕рж╛ржерзЗржЗ рж╕рзЗржЯрж┐ ржкрзНрж░рждрзНржпрзЗржХ ржлрж▓рзЛржпрж╝рж╛рж░рзЗрж░ рж╣рзЛржо ржлрж┐ржбрзЗ рж▓рж┐ржЦрзЗ рж░рж╛ржЦрж╛ рж╣ржпрж╝. 
ржлрж▓рж╛ржлрж▓? тЪб ржЦрзБржм ржжрзНрж░рзБржд ржкржбрж╝рж╛ ржпрж╛ржпрж╝.
рж╕ржорж╕рзНржпрж╛ рждржЦржиржЗ рждрзИрж░рж┐ рж╣ржпрж╝ ржпржЦржи ржПржХржЬржи ржЗржЙржЬрж╛рж░рзЗрж░ рж▓рж╛ржЦрзЛ ржлрж▓рзЛржпрж╝рж╛рж░ ржерж╛ржХрзЗ. ржХрж╛рж░ржг:
1я╕ПтГгWrite Amplification (ржЕрждрж┐рж░рж┐ржХрзНржд ржХрж╛ржЬ)
 ЁЯФ╕ржПржХржЯрж┐ ржкрзЛрж╕рзНржЯ ржХрж░рждрзЗ ржЧрж┐ржпрж╝рзЗ рж╕рж┐рж╕рзНржЯрзЗржоржХрзЗ рж╕рзЗржЗ ржкрзЛрж╕рзНржЯ ржЖржЗржбрж┐ рж▓рж╛ржЦрзЛ ржлрж▓рзЛржпрж╝рж╛рж░рзЗрж░ рж╣рзЛржо ржлрж┐ржбрзЗ ржХржкрж┐ ржХрж░рждрзЗ рж╣ржпрж╝ред
 ЁЯФ╕ржПрж░ ржорж╛ржирзЗ рж╣рж▓рзЛ ржПржХржЯрж┐ рж╕рж╛ржзрж╛рж░ржг ржкрзЛрж╕рзНржЯ ржЖрж╕рж▓рзЗ рж▓рж╛ржЦрзЛржмрж╛рж░ рж▓рзЗржЦрж╛ рж╣ржЪрзНржЫрзЗ.
2я╕ПтГгHotspot / Hot Key Problem
 ЁЯФ╕ржПржд ржмрзЗрж╢рж┐ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржПржХрж╕рж╛ржерзЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рждрзЗ ржЧрж┐ржпрж╝рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржмрж╛ ржбрж╛ржЯрж╛ржмрзЗржЬрзЗ ржЪрж╛ржк ржкржбрж╝рзЗред
 ЁЯФ╕ржПржХрзНрж╕ржЯрзНрж░рж╛ рж▓рзЛржбрзЗрж░ ржХрж╛рж░ржгрзЗ рж╕рж┐рж╕рзНржЯрзЗржо slow рж╣ржпрж╝рзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ ржмрж╛ failed рж╣рждрзЗ ржкрж╛рж░рзЗ.
3я╕ПтГгResource Waste
 ЁЯФ╕ржЕржирзЗржХ ржлрж▓рзЛржпрж╝рж╛рж░ рж╣ржпрж╝рждрзЛ ржЕрзНржпрж╛ржк open-ржЗ ржХрж░рзЗ ржирж╛. рждржмрзБржУ рждрж╛ржжрзЗрж░ ржлрж┐ржбрзЗ ржЖржЧрзЗ ржерзЗржХрзЗржЗ ржкрзЛрж╕рзНржЯ рж▓рж┐ржЦрзЗ рж░рж╛ржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗ.
 ЁЯФ╕ржПрждрзЗ рж╕рзНржЯрзЛрж░рзЗржЬ ржУ ржХржорзНржкрж┐ржЙржЯрж┐ржВ рж░рж┐рж╕рзЛрж░рзНрж╕ ржирж╖рзНржЯ рж╣ржпрж╝.

ЁЯУЦ Fanout-on-Read (Pull) тЖТ ржХрзЗржЙ ржлрж┐ржб ржЦрзБрж▓рж▓рзЗ рждржЦржиржЗ рждрж╛рж░ ржлрж▓рзЛ ржХрж░рж╛ ржПржХрж╛ржЙржирзНржЯржЧрзБрж▓рзЛрж░ ржкрзЛрж╕рзНржЯ ржЯрзЗржирзЗ ржЖржирж╛ рж╣ржпрж╝. ржПржЦрж╛ржирзЗ рж▓рзЗржЦржХрзЗрж░ ржлрж▓рзЛржпрж╝рж╛рж░ ржпрждржЗ рж╣рзЛржХ ржирж╛ ржХрзЗржи, рж╕рж┐рж╕рзНржЯрзЗржо ржЪрж╛ржк ржХржо ржкржбрж╝рзЗ.

ЁЯдЭ рж╣рж╛ржЗржмрзНрж░рж┐ржб ржоржбрзЗрж▓
 ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ ржмржбрж╝ ржкрзНрж▓рзНржпрж╛ржЯржлрж░рзНржо (Facebook, Instagram, Twitter/X) ржЖрж╕рж▓рзЗ ржПржХржЯрж┐ рж╣рж╛ржЗржмрзНрж░рж┐ржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ. рж╕рж╛ржзрж╛рж░ржг ржЗржЙржЬрж╛рж░ржжрзЗрж░ ржЬржирзНржп Push, ржЖрж░ тАЬрж╕рзЗрж▓рж┐ржмрзНрж░рж┐ржЯрж┐тАЭ ржПржХрж╛ржЙржирзНржЯржЧрзБрж▓рзЛрж░ ржЬржирзНржп Pull.

ЁЯУМ рж╕рж╣ржЬ ржЙржжрж╛рж╣рж░ржг:
 ржнрж╛ржмрзБржи, ржЖржкржирж╛рж░ ржЕржлрж┐рж╕рзЗ ржПржХ рж╕рж╣ржХрж░рзНржорзА ржПржХржЯрж┐ ржорзЗржЗрж▓ ржкрж╛ржарж╛рж▓рзЗржи. ржпржжрж┐ рждрж┐ржирж┐ рж╕рж░рж╛рж╕рж░рж┐ рж╕ржмрж╛ржЗржХрзЗ ржХржкрж┐ ржХрж░рзЗ ржжрзЗржи (Push), рждржмрзЗ рж╕ржмрж╛рж░ ржЗржиржмржХрзНрж╕ ржкрзВрж░рзНржг рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗ. ржХрж┐ржирзНрждрзБ ржмржбрж╝ ржмрж╕ ржпржжрж┐ ржШрзЛрж╖ржгрж╛ ржжрзЗржи, рждржмрзЗ рж╕ржмрж╛ржЗ рж╢рзБржзрзБ ржЗржиржмржХрзНрж╕рзЗ ржЧрж┐ржпрж╝рзЗ ржкржбрж╝рждрзЗ ржкрж╛рж░ржмрзЗржи (Pull).

ЁЯТбFanout рж╣рж▓рзЛ рж╕рзЗржЗ ржбрж┐ржЬрж╛ржЗржи рж╕рж┐ржжрзНржзрж╛ржирзНржд ржпрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ ржЖржкржирж╛рж░ ржлрж┐ржб ржХржд ржжрзНрж░рзБржд, ржХржд рж╕рзНржХрзЗрж▓рзЗржмрж▓, ржПржмржВ ржХржд ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржп рж╣ржмрзЗ.

#SystemDesign #NewsFeed #AlexXu #Fanout
